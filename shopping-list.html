<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ÏáºÌïë Î¶¨Ïä§Ìä∏</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --primary: #6c5ce7;
    --primary-light: #a29bfe;
    --primary-bg: #f0edff;
    --bg: #f4f3f8;
    --card: #ffffff;
    --text: #2d3436;
    --text-sub: #888;
    --border: #eee;
    --radius: 14px;
    --shadow: 0 4px 24px rgba(108,92,231,0.08), 0 1px 4px rgba(0,0,0,0.04);
  }

  body {
    font-family: 'Noto Sans KR', 'Segoe UI', sans-serif;
    background: var(--bg);
    background-image:
      radial-gradient(at 20% 0%, rgba(108,92,231,0.06) 0%, transparent 50%),
      radial-gradient(at 80% 100%, rgba(162,155,254,0.06) 0%, transparent 50%);
    display: flex;
    justify-content: center;
    padding: 32px 16px;
    min-height: 100vh;
  }

  .container {
    width: 100%;
    max-width: 500px;
    height: fit-content;
  }

  /* Ìó§Îçî */
  .header {
    text-align: center;
    margin-bottom: 24px;
  }

  .header h1 {
    font-size: 28px;
    font-weight: 700;
    color: var(--text);
    letter-spacing: -0.5px;
  }

  .header h1 span {
    background: linear-gradient(135deg, var(--primary), var(--primary-light));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .header .subtitle {
    font-size: 13px;
    color: var(--text-sub);
    margin-top: 4px;
  }

  /* ÏûÖÎ†• Ïπ¥Îìú */
  .input-card {
    background: var(--card);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 20px;
    margin-bottom: 16px;
  }

  .input-row {
    display: flex;
    gap: 10px;
  }

  .input-row input {
    flex: 1;
    padding: 14px 18px;
    border: 2px solid var(--border);
    border-radius: 12px;
    font-size: 15px;
    font-family: inherit;
    outline: none;
    transition: all 0.25s;
    background: #fafafe;
  }

  .input-row input:focus {
    border-color: var(--primary-light);
    background: #fff;
    box-shadow: 0 0 0 4px rgba(108,92,231,0.08);
  }

  .input-row input::placeholder { color: #c0bdd0; }

  .input-row button {
    padding: 14px 24px;
    background: linear-gradient(135deg, var(--primary), var(--primary-light));
    color: #fff;
    border: none;
    border-radius: 12px;
    font-size: 15px;
    font-weight: 600;
    font-family: inherit;
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.25s;
    box-shadow: 0 4px 12px rgba(108,92,231,0.25);
  }

  .input-row button:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 20px rgba(108,92,231,0.35);
  }

  .input-row button:active {
    transform: translateY(0);
  }

  .category-row {
    display: flex;
    gap: 6px;
    margin-top: 14px;
    flex-wrap: wrap;
  }

  .cat-chip {
    padding: 6px 14px;
    border-radius: 20px;
    border: 1.5px solid var(--border);
    background: #fff;
    font-size: 12.5px;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.2s;
    color: #999;
    user-select: none;
  }

  .cat-chip:hover {
    border-color: #ccc;
    color: #666;
  }

  .cat-chip.active {
    border-color: var(--cat-color);
    background: var(--cat-bg);
    color: var(--cat-color);
    font-weight: 600;
    box-shadow: 0 2px 8px color-mix(in srgb, var(--cat-color) 15%, transparent);
  }

  /* ÌïÑÌÑ∞ Î∞î */
  .filter-bar {
    display: flex;
    gap: 6px;
    margin-bottom: 12px;
    flex-wrap: wrap;
    padding: 0 4px;
  }

  .filter-chip {
    padding: 6px 14px;
    border-radius: 20px;
    border: none;
    background: rgba(255,255,255,0.7);
    font-size: 12.5px;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.2s;
    color: #999;
    backdrop-filter: blur(4px);
  }

  .filter-chip:hover { background: #fff; color: #666; }

  .filter-chip.active {
    background: var(--text);
    color: #fff;
    box-shadow: 0 2px 8px rgba(0,0,0,0.12);
  }

  /* Ïπ¥ÌÖåÍ≥†Î¶¨ Í∑∏Î£π */
  .category-group {
    background: var(--card);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    margin-bottom: 12px;
    overflow: hidden;
  }

  .category-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 14px 18px 8px;
    font-size: 13px;
    font-weight: 700;
    color: var(--cat-color);
    user-select: none;
    letter-spacing: -0.3px;
  }

  .category-header .dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--cat-color);
    box-shadow: 0 0 0 3px var(--cat-bg);
  }

  .category-header .badge {
    background: var(--cat-bg);
    color: var(--cat-color);
    font-size: 11px;
    font-weight: 600;
    padding: 3px 10px;
    border-radius: 10px;
    margin-left: auto;
  }

  /* Î¶¨Ïä§Ìä∏ */
  .list {
    list-style: none;
  }

  .list li {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 13px 18px;
    border-top: 1px solid #f5f3fa;
    transition: background 0.15s;
  }

  .list li:hover { background: #fcfbff; }

  .list li.checked { opacity: 0.55; }

  .list li.checked .item-text {
    text-decoration: line-through;
    color: #bbb;
  }

  @keyframes slideIn {
    from { opacity: 0; transform: translateY(-6px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .list li { animation: slideIn 0.2s ease; }

  /* Ï≤¥ÌÅ¨Î∞ïÏä§ */
  .checkbox {
    width: 22px;
    height: 22px;
    border: 2px solid #d5d0e5;
    border-radius: 7px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: all 0.2s;
  }

  .checkbox:hover { border-color: var(--primary-light); }

  .checked .checkbox {
    background: linear-gradient(135deg, var(--primary), var(--primary-light));
    border-color: transparent;
    box-shadow: 0 2px 6px rgba(108,92,231,0.3);
  }

  .checked .checkbox::after {
    content: '';
    width: 6px;
    height: 10px;
    border: solid #fff;
    border-width: 0 2.2px 2.2px 0;
    transform: rotate(45deg) translate(-1px, -1px);
  }

  .item-text {
    flex: 1;
    font-size: 14.5px;
    color: var(--text);
    word-break: break-word;
    line-height: 1.4;
  }

  .item-cat-tag {
    font-size: 11px;
    padding: 2px 8px;
    border-radius: 10px;
    background: var(--cat-bg);
    color: var(--cat-color);
    font-weight: 600;
    flex-shrink: 0;
  }

  .delete-btn {
    background: none;
    border: none;
    color: #d5d0e5;
    font-size: 16px;
    cursor: pointer;
    padding: 4px 6px;
    border-radius: 8px;
    transition: all 0.2s;
    flex-shrink: 0;
    opacity: 0;
  }

  .list li:hover .delete-btn { opacity: 1; }

  .delete-btn:hover {
    color: #e17055;
    background: #fef0ec;
  }

  /* Îã®Ïùº ÌïÑÌÑ∞ Î¶¨Ïä§Ìä∏ Ïπ¥Îìú */
  .single-list-card {
    background: var(--card);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    overflow: hidden;
    margin-bottom: 12px;
  }

  .single-list-card .list li:first-child { border-top: none; }

  /* Îπà ÏÉÅÌÉú */
  .empty {
    text-align: center;
    color: #c8c4d8;
    padding: 48px 0;
    font-size: 14px;
  }

  .empty-icon {
    font-size: 40px;
    margin-bottom: 12px;
    opacity: 0.5;
  }

  /* ÌïòÎã® Ïπ¥Ïö¥ÌÑ∞ */
  .footer {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 12px;
    margin-top: 16px;
    padding: 0 4px;
  }

  .count {
    font-size: 12.5px;
    color: var(--text-sub);
  }

  .progress-bar {
    flex: 1;
    max-width: 180px;
    height: 5px;
    background: var(--border);
    border-radius: 3px;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary), var(--primary-light));
    border-radius: 3px;
    transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Î™®Î∞îÏùº ÌÑ∞Ïπò ÏßÄÏõê */
  @media (hover: none) {
    .delete-btn { opacity: 0.5; }
  }

  @media (max-width: 480px) {
    body { padding: 16px 10px; }
    .input-card { padding: 16px; }
    .input-row input { padding: 12px 14px; }
    .input-row button { padding: 12px 18px; }
  }
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <h1><span>Shopping</span> List</h1>
    <div class="subtitle" id="dateText"></div>
  </div>

  <div class="input-card">
    <div class="input-row">
      <input type="text" id="itemInput" placeholder="Î¨¥ÏóáÏùÑ ÏÇ¨Ïïº ÌïòÎÇòÏöî?" autofocus>
      <button onclick="addItem()">Ï∂îÍ∞Ä</button>
    </div>
    <div class="category-row" id="categorySelect"></div>
  </div>

  <div class="filter-bar" id="filterBar"></div>
  <div id="listArea"></div>

  <div class="footer" id="footer" style="display:none">
    <span class="count" id="count"></span>
    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
  </div>
</div>

<script>
  const inputEl = document.getElementById('itemInput');
  const listArea = document.getElementById('listArea');
  const countEl = document.getElementById('count');
  const footerEl = document.getElementById('footer');
  const progressEl = document.getElementById('progressFill');
  const categorySelectEl = document.getElementById('categorySelect');
  const filterBarEl = document.getElementById('filterBar');
  const dateTextEl = document.getElementById('dateText');

  const days = ['Ïùº', 'Ïõî', 'Ìôî', 'Ïàò', 'Î™©', 'Í∏à', 'ÌÜ†'];
  const now = new Date();
  dateTextEl.textContent = `${now.getFullYear()}. ${now.getMonth()+1}. ${now.getDate()} (${days[now.getDay()]})`;

  const CATEGORIES = [
    { id: 'fruit',  label: 'Í≥ºÏùº/Ï±ÑÏÜå', icon: 'ü•¨', color: '#00b894', bg: '#e6fcf3' },
    { id: 'meat',   label: 'Ï†ïÏú°/ÏàòÏÇ∞', icon: 'ü•©', color: '#e17055', bg: '#fef0ec' },
    { id: 'dairy',  label: 'Ïú†Ï†úÌíà',    icon: 'üßÄ', color: '#fdcb6e', bg: '#fef9e7' },
    { id: 'snack',  label: 'Í∞ÑÏãù/ÏùåÎ£å', icon: 'üçø', color: '#e07b28', bg: '#fff3e6' },
    { id: 'frozen', label: 'ÎÉâÎèôÏãùÌíà',  icon: 'üßä', color: '#74b9ff', bg: '#eaf4fe' },
    { id: 'daily',  label: 'ÏÉùÌôúÏö©Ìíà',  icon: 'üß¥', color: '#a29bfe', bg: '#f0edff' },
    { id: 'other',  label: 'Í∏∞ÌÉÄ',      icon: 'üì¶', color: '#b2bec3', bg: '#f0f0f2' },
  ];

  let items = JSON.parse(localStorage.getItem('shopping-list-v2') || '[]');
  let selectedCategory = 'other';
  let filterCategory = 'all';

  inputEl.addEventListener('keydown', e => {
    if (e.key === 'Enter') addItem();
  });

  function save() {
    localStorage.setItem('shopping-list-v2', JSON.stringify(items));
  }

  function getCat(id) {
    return CATEGORIES.find(c => c.id === id) || CATEGORIES[CATEGORIES.length - 1];
  }

  function addItem() {
    const text = inputEl.value.trim();
    if (!text) return;
    items.push({ text, checked: false, category: selectedCategory });
    inputEl.value = '';
    save();
    render();
    inputEl.focus();
  }

  function toggleItem(i) {
    items[i].checked = !items[i].checked;
    save();
    render();
  }

  function deleteItem(i) {
    items.splice(i, 1);
    save();
    render();
  }

  function selectCategory(id) {
    selectedCategory = id;
    renderCategorySelect();
  }

  function setFilter(id) {
    filterCategory = id;
    render();
  }

  function renderCategorySelect() {
    categorySelectEl.innerHTML = CATEGORIES.map(c => `
      <div class="cat-chip ${selectedCategory === c.id ? 'active' : ''}"
           style="--cat-color:${c.color};--cat-bg:${c.bg}"
           onclick="selectCategory('${c.id}')">
        ${c.icon} ${c.label}
      </div>
    `).join('');
  }

  function renderFilterBar() {
    const usedCats = [...new Set(items.map(it => it.category || 'other'))];
    if (items.length === 0) { filterBarEl.innerHTML = ''; return; }
    let html = `<button class="filter-chip ${filterCategory === 'all' ? 'active' : ''}" onclick="setFilter('all')">Ï†ÑÏ≤¥</button>`;
    CATEGORIES.forEach(c => {
      if (usedCats.includes(c.id)) {
        html += `<button class="filter-chip ${filterCategory === c.id ? 'active' : ''}" onclick="setFilter('${c.id}')">${c.icon} ${c.label}</button>`;
      }
    });
    filterBarEl.innerHTML = html;
  }

  function renderList(filtered) {
    if (filtered.length === 0) {
      return `<div class="empty"><div class="empty-icon">üõí</div>Î¶¨Ïä§Ìä∏Í∞Ä ÎπÑÏñ¥ ÏûàÏäµÎãàÎã§</div>`;
    }

    if (filterCategory !== 'all') {
      return '<div class="single-list-card"><ul class="list">' +
        filtered.map(({ item, idx }) => renderItem(item, idx)).join('') +
        '</ul></div>';
    }

    const groups = {};
    filtered.forEach(({ item, idx }) => {
      const catId = item.category || 'other';
      if (!groups[catId]) groups[catId] = [];
      groups[catId].push({ item, idx });
    });

    let html = '';
    CATEGORIES.forEach(c => {
      const group = groups[c.id];
      if (!group) return;
      const done = group.filter(g => g.item.checked).length;
      html += `
        <div class="category-group">
          <div class="category-header" style="--cat-color:${c.color};--cat-bg:${c.bg}">
            <span class="dot"></span>
            ${c.icon} ${c.label}
            <span class="badge">${done}/${group.length}</span>
          </div>
          <ul class="list">
            ${group.map(({ item, idx }) => renderItem(item, idx)).join('')}
          </ul>
        </div>`;
    });
    return html;
  }

  function renderItem(item, idx) {
    return `
      <li class="${item.checked ? 'checked' : ''}">
        <div class="checkbox" onclick="toggleItem(${idx})"></div>
        <span class="item-text">${escapeHtml(item.text)}</span>
        <button class="delete-btn" onclick="deleteItem(${idx})">&#x2715;</button>
      </li>`;
  }

  function render() {
    renderCategorySelect();
    renderFilterBar();

    const filtered = items
      .map((item, idx) => ({ item, idx }))
      .filter(({ item }) => filterCategory === 'all' || (item.category || 'other') === filterCategory);

    listArea.innerHTML = renderList(filtered);

    const total = items.length;
    const checked = items.filter(it => it.checked).length;

    if (total > 0) {
      footerEl.style.display = 'flex';
      countEl.textContent = `${checked} / ${total} ÏôÑÎ£å`;
      progressEl.style.width = `${(checked / total) * 100}%`;
    } else {
      footerEl.style.display = 'none';
    }
  }

  function escapeHtml(str) {
    const d = document.createElement('div');
    d.textContent = str;
    return d.innerHTML;
  }

  render();
</script>

</body>
</html>